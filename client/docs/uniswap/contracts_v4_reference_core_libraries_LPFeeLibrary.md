# https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary

[Skip to main content](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#__docusaurus_skipToContent_fallback)
[Uniswap Docs](https://docs.uniswap.org/)
Search`⌘``K`
[Submit Feedback](https://docs.google.com/forms/d/e/1FAIpQLSdjSkZam8KiatL9XACRVxCHjDJjaPGbls77PCXDKFn4JwykXg/viewform)
  * [Concepts](https://docs.uniswap.org/concepts/overview)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
    * [v4 Protocol](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
      * [Overview](https://docs.uniswap.org/contracts/v4/overview)
      * [Deployments](https://docs.uniswap.org/contracts/v4/deployments)
      * [Concepts](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
      * [Quickstart](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
        * [Create Pool](https://docs.uniswap.org/contracts/v4/quickstart/create-pool)
        * [Manage Liquidity](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
        * [Swap](https://docs.uniswap.org/contracts/v4/quickstart/swap)
        * [Hooks](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
        * [Subscriber](https://docs.uniswap.org/contracts/v4/quickstart/subscriber)
      * [Guides](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
      * [Technical Reference](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
        * [Errors](https://docs.uniswap.org/contracts/v4/reference/errors/)
        * [Core](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
          * [Libraries](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
            * [BitMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/BitMath)
            * [CurrencyDelta](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CurrencyDelta)
            * [CurrencyReserves](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CurrencyReserves)
            * [CustomRevert](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CustomRevert)
            * [FixedPoint128](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FixedPoint128)
            * [FixedPoint96](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FixedPoint96)
            * [FullMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FullMath)
            * [Hooks](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Hooks)
            * [LPFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
            * [LiquidityMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LiquidityMath)
            * [Lock](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Lock)
            * [NonzeroDeltaCount](https://docs.uniswap.org/contracts/v4/reference/core/libraries/NonzeroDeltaCount)
            * [ParseBytes](https://docs.uniswap.org/contracts/v4/reference/core/libraries/ParseBytes)
            * [Pool](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Pool)
            * [Position](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Position)
            * [ProtocolFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/ProtocolFeeLibrary)
            * [SafeCast](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SafeCast)
            * [SqrtPriceMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SqrtPriceMath)
            * [StateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/StateLibrary)
            * [SwapMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath)
            * [TickBitmap](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickBitmap)
            * [TickMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickMath)
            * [TransientStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TransientStateLibrary)
            * [UnsafeMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/UnsafeMath)
            * [LiquidityAmounts](https://docs.uniswap.org/contracts/v4/reference/core/libraries/liquidity-amounts)
            * [TransientStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/transient-state-library)
          * [Types](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
          * [ERC6909](https://docs.uniswap.org/contracts/v4/reference/core/ERC6909)
          * [ERC6909Claims](https://docs.uniswap.org/contracts/v4/reference/core/ERC6909Claims)
          * [Extsload](https://docs.uniswap.org/contracts/v4/reference/core/Extsload)
          * [Exttload](https://docs.uniswap.org/contracts/v4/reference/core/Exttload)
          * [IPoolManager](https://docs.uniswap.org/contracts/v4/reference/core/IPoolManager)
          * [NoDelegateCall](https://docs.uniswap.org/contracts/v4/reference/core/NoDelegateCall)
          * [PoolManager](https://docs.uniswap.org/contracts/v4/reference/core/PoolManager)
          * [ProtocolFees](https://docs.uniswap.org/contracts/v4/reference/core/ProtocolFees)
          * [interfaces](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
          * [test](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
        * [Periphery](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [v3 Protocol](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [Smart Wallet](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [UniswapX](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [Universal Router](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [Permit2](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [v2 Protocol](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
    * [v1 Protocol](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
  * [SDKs](https://docs.uniswap.org/sdk/v4/overview)
  * [APIs](https://docs.uniswap.org/api/subgraph/overview)


  * [Home](https://docs.uniswap.org/)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
  * v4 Protocol
  * Technical Reference
  * Core
  * Libraries
  * [LPFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)


On this page
# LPFeeLibrary
[Git Source](https://github.com/uniswap/v4-core/blob/80311e34080fee64b6fc6c916e9a51a437d0e482/src/libraries/LPFeeLibrary.sol) - Generated with [forge doc](https://book.getfoundry.sh/reference/forge/forge-doc)
Library of helper functions for a pools LP fee
## State Variables[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#state-variables "Direct link to State Variables")
### DYNAMIC_FEE_FLAG[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#dynamic_fee_flag "Direct link to DYNAMIC_FEE_FLAG")
An lp fee of exactly 0b1000000... signals a dynamic fee pool. This isn't a valid static fee as it is > MAX_LP_FEE
```
uint24publicconstant DYNAMIC_FEE_FLAG =0x800000;
```

### OVERRIDE_FEE_FLAG[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#override_fee_flag "Direct link to OVERRIDE_FEE_FLAG")
the second bit of the fee returned by beforeSwap is used to signal if the stored LP fee should be overridden in this swap
```
uint24publicconstant OVERRIDE_FEE_FLAG =0x400000;
```

### REMOVE_OVERRIDE_MASK[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#remove_override_mask "Direct link to REMOVE_OVERRIDE_MASK")
mask to remove the override fee flag from a fee returned by the beforeSwaphook
```
uint24publicconstant REMOVE_OVERRIDE_MASK =0xBFFFFF;
```

### MAX_LP_FEE[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#max_lp_fee "Direct link to MAX_LP_FEE")
the lp fee is represented in hundredths of a bip, so the max is 100%
```
uint24publicconstant MAX_LP_FEE =1000000;
```

## Functions[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#functions "Direct link to Functions")
### isDynamicFee[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#isdynamicfee "Direct link to isDynamicFee")
returns true if a pool's LP fee signals that the pool has a dynamic fee
```
functionisDynamicFee(uint24 self)internalpurereturns(bool);
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to check  
**Returns**
Name| Type| Description  
---|---|---  
`<none>`| `bool`| bool True of the fee is dynamic  
### isValid[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#isvalid "Direct link to isValid")
returns true if an LP fee is valid, aka not above the maximum permitted fee
```
functionisValid(uint24 self)internalpurereturns(bool);
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to check  
**Returns**
Name| Type| Description  
---|---|---  
`<none>`| `bool`| bool True of the fee is valid  
### validate[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#validate "Direct link to validate")
validates whether an LP fee is larger than the maximum, and reverts if invalid
```
functionvalidate(uint24 self)internalpure;
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to validate  
### getInitialLPFee[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#getinitiallpfee "Direct link to getInitialLPFee")
gets and validates the initial LP fee for a pool. Dynamic fee pools have an initial fee of 0.
_if a dynamic fee pool wants a non-0 initial fee, it should call`updateDynamicLPFee` in the afterInitialize hook_
```
functiongetInitialLPFee(uint24 self)internalpurereturns(uint24);
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to get the initial LP from  
**Returns**
Name| Type| Description  
---|---|---  
`<none>`| `uint24`| initialFee 0 if the fee is dynamic, otherwise the fee (if valid)  
### isOverride[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#isoverride "Direct link to isOverride")
returns true if the fee has the override flag set (2nd highest bit of the uint24)
```
functionisOverride(uint24 self)internalpurereturns(bool);
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to check  
**Returns**
Name| Type| Description  
---|---|---  
`<none>`| `bool`| bool True of the fee has the override flag set  
### removeOverrideFlag[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#removeoverrideflag "Direct link to removeOverrideFlag")
returns a fee with the override flag removed
```
functionremoveOverrideFlag(uint24 self)internalpurereturns(uint24);
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to remove the override flag from  
**Returns**
Name| Type| Description  
---|---|---  
`<none>`| `uint24`| fee The fee without the override flag set  
### removeOverrideFlagAndValidate[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#removeoverrideflagandvalidate "Direct link to removeOverrideFlagAndValidate")
Removes the override flag and validates the fee (reverts if the fee is too large)
```
functionremoveOverrideFlagAndValidate(uint24 self)internalpurereturns(uint24 fee);
```

**Parameters**
Name| Type| Description  
---|---|---  
`self`| `uint24`| The fee to remove the override flag from, and then validate  
**Returns**
Name| Type| Description  
---|---|---  
`fee`| `uint24`| The fee without the override flag set (if valid)  
## Errors[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#errors "Direct link to Errors")
### LPFeeTooLarge[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#lpfeetoolarge "Direct link to LPFeeTooLarge")
Thrown when the static or dynamic fee on a pool exceeds 100%.
```
error LPFeeTooLarge(uint24 fee);
```

[Edit this page](https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/v4/reference/core/libraries/LPFeeLibrary.md)
Was this helpful?
[PreviousHooks](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Hooks)[NextLiquidityMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LiquidityMath)
On this page
  * [State Variables](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#state-variables)
    * [DYNAMIC_FEE_FLAG](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#dynamic_fee_flag)
    * [OVERRIDE_FEE_FLAG](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#override_fee_flag)
    * [REMOVE_OVERRIDE_MASK](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#remove_override_mask)
    * [MAX_LP_FEE](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#max_lp_fee)
  * [Functions](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#functions)
    * [isDynamicFee](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#isdynamicfee)
    * [isValid](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#isvalid)
    * [validate](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#validate)
    * [getInitialLPFee](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#getinitiallpfee)
    * [isOverride](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#isoverride)
    * [removeOverrideFlag](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#removeoverrideflag)
    * [removeOverrideFlagAndValidate](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#removeoverrideflagandvalidate)
  * [Errors](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#errors)
    * [LPFeeTooLarge](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary#lpfeetoolarge)


[Edit this page](https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/v4/reference/core/libraries/LPFeeLibrary.md)
## Footer
[Uniswap Labs](https://docs.uniswap.org/)
### Developers
  * [Dev Chat](https://discord.com/invite/uniswap)
  * [Concepts](https://docs.uniswap.org/concepts/overview)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
  * [SDKs](https://docs.uniswap.org/sdk/v4/overview)
  * [APIs](https://docs.uniswap.org/api/subgraph/overview)
  * [Whitepaper](https://app.uniswap.org/whitepaper-v4.pdf)


### Ecosystem
  * [Uniswap App](https://app.uniswap.org/)
  * [Governance](https://www.uniswapfoundation.org/governance)
  * [Blog](https://blog.uniswap.org/)


### Company
  * [Careers](https://boards.greenhouse.io/uniswaplabs)
  * [Brand Assets](https://github.com/Uniswap/brand-assets/raw/main/Uniswap%20Brand%20Assets.zip)
  * [Terms of Service](https://support.uniswap.org/hc/en-us/articles/30935100859661-Uniswap-Labs-Terms-of-Service)
  * [Privacy Policy](https://support.uniswap.org/hc/en-us/articles/30934457771405-Uniswap-Labs-Privacy-Policy)
  * [Trademark Policy](https://support.uniswap.org/hc/en-us/articles/30934762216973-Uniswap-Labs-Trademark-Guidelines)


### Need Help?
  * [Help Center](https://support.uniswap.org/)
  * [Contact Us](https://support.uniswap.org/hc/en-us/requests/new)


@2025 Uniswap Labs
[](https://github.com/uniswap/uniswap-docs)[](https://twitter.com/Uniswap)[](https://discord.com/invite/uniswap)
