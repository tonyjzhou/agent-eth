# https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath

[Skip to main content](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#__docusaurus_skipToContent_fallback)
[Uniswap Docs](https://docs.uniswap.org/)
Search
[Submit Feedback](https://docs.google.com/forms/d/e/1FAIpQLSdjSkZam8KiatL9XACRVxCHjDJjaPGbls77PCXDKFn4JwykXg/viewform)
  * [Concepts](https://docs.uniswap.org/concepts/overview)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
    * [v4 Protocol](https://docs.uniswap.org/contracts/v4/overview)
      * [Overview](https://docs.uniswap.org/contracts/v4/overview)
      * [Deployments](https://docs.uniswap.org/contracts/v4/deployments)
      * [Concepts](https://docs.uniswap.org/contracts/v4/concepts/v4-vs-v3)
      * [Quickstart](https://docs.uniswap.org/contracts/v4/quickstart/create-pool)
        * [Create Pool](https://docs.uniswap.org/contracts/v4/quickstart/create-pool)
        * [Manage Liquidity](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/setup-liquidity)
        * [Swap](https://docs.uniswap.org/contracts/v4/quickstart/swap)
        * [Hooks](https://docs.uniswap.org/contracts/v4/quickstart/hooks/setup)
        * [Subscriber](https://docs.uniswap.org/contracts/v4/quickstart/subscriber)
      * [Guides](https://docs.uniswap.org/contracts/v4/guides/hooks/your-first-hook)
      * [Technical Reference](https://docs.uniswap.org/contracts/v4/reference/errors/)
    * [v3 Protocol](https://docs.uniswap.org/contracts/v3/overview)
      * [Overview](https://docs.uniswap.org/contracts/v3/overview)
      * [Guides](https://docs.uniswap.org/contracts/v3/guides/local-environment)
        * [Set Up Your Local Environment](https://docs.uniswap.org/contracts/v3/guides/local-environment)
        * [Implement A Swap](https://docs.uniswap.org/contracts/v3/guides/swaps/single-swaps)
        * [Providing Liquidity](https://docs.uniswap.org/contracts/v3/guides/providing-liquidity/setting-up)
        * [Liquidity Mining](https://docs.uniswap.org/contracts/v3/guides/liquidity-mining/overview)
        * [Implement Flash Swaps](https://docs.uniswap.org/contracts/v3/guides/flash-integrations/inheritance-constructors)
        * [Governance Proposals](https://docs.uniswap.org/contracts/v3/guides/governance/liscense-modifications)
      * [Technical Reference](https://docs.uniswap.org/contracts/v3/reference/overview)
        * [Overview](https://docs.uniswap.org/contracts/v3/reference/overview)
        * [Core](https://docs.uniswap.org/contracts/v3/reference/core/UniswapV3Factory)
          * [UniswapV3Factory](https://docs.uniswap.org/contracts/v3/reference/core/UniswapV3Factory)
          * [UniswapV3Pool](https://docs.uniswap.org/contracts/v3/reference/core/UniswapV3Pool)
          * [UniswapV3PoolDeployer](https://docs.uniswap.org/contracts/v3/reference/core/UniswapV3PoolDeployer)
          * [Interfaces](https://docs.uniswap.org/contracts/v3/reference/core/interfaces/IERC20Minimal)
          * [Libraries](https://docs.uniswap.org/contracts/v3/reference/core/libraries/BitMath)
            * [BitMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/BitMath)
            * [FixedPoint128](https://docs.uniswap.org/contracts/v3/reference/core/libraries/FixedPoint128)
            * [FixedPoint96](https://docs.uniswap.org/contracts/v3/reference/core/libraries/FixedPoint96)
            * [FullMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/FullMath)
            * [LiquidityMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/LiquidityMath)
            * [LowGasSafeMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/LowGasSafeMath)
            * [Oracle](https://docs.uniswap.org/contracts/v3/reference/core/libraries/Oracle)
            * [Position](https://docs.uniswap.org/contracts/v3/reference/core/libraries/Position)
            * [SafeCast](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SafeCast)
            * [SecondsOutside](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SecondsOutside)
            * [SqrtPriceMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath)
            * [SwapMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SwapMath)
            * [Tick](https://docs.uniswap.org/contracts/v3/reference/core/libraries/Tick)
            * [TickBitmap](https://docs.uniswap.org/contracts/v3/reference/core/libraries/TickBitmap)
            * [TickMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/TickMath)
            * [TransferHelper](https://docs.uniswap.org/contracts/v3/reference/core/libraries/TransferHelper)
            * [UnsafeMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/UnsafeMath)
        * [Governance](https://docs.uniswap.org/contracts/v3/reference/governance/overview)
        * [Periphery](https://docs.uniswap.org/contracts/v3/reference/periphery/base/BlockTimestamp)
        * [Deployments](https://docs.uniswap.org/contracts/v3/reference/deployments/)
        * [Error Codes](https://docs.uniswap.org/contracts/v3/reference/error-codes)
    * [Smart Wallet](https://docs.uniswap.org/contracts/smart-wallet/overview)
    * [UniswapX](https://docs.uniswap.org/contracts/uniswapx/overview)
    * [Universal Router](https://docs.uniswap.org/contracts/universal-router/overview)
    * [Permit2](https://docs.uniswap.org/contracts/permit2/overview)
    * [v2 Protocol](https://docs.uniswap.org/contracts/v2/overview)
    * [v1 Protocol](https://docs.uniswap.org/contracts/v1/overview)
  * [SDKs](https://docs.uniswap.org/sdk/v4/overview)
  * [APIs](https://docs.uniswap.org/api/subgraph/overview)


  * [Home](https://docs.uniswap.org/)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
  * v3 Protocol
  * Technical Reference
  * Core
  * Libraries
  * [SqrtPriceMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath)


On this page
# SqrtPriceMath
Contains the math that uses square root of price as a Q64.96 and liquidity to compute deltas
## Functions[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#functions "Direct link to Functions")
### getNextSqrtPriceFromAmount0RoundingUp[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefromamount0roundingup "Direct link to getNextSqrtPriceFromAmount0RoundingUp")
```
functiongetNextSqrtPriceFromAmount0RoundingUp(uint160 sqrtPX96,uint128 liquidity,uint256 amount,bool add)internalpurereturns(uint160)
```

Gets the next sqrt price given a delta of token0
Always rounds up, because in the exact output case (increasing price) we need to move the price at least far enough to get the desired output amount, and in the exact input case (decreasing price) we need to move the price less in order to not send too much output. The most precise formula for this is _liquidity * sqrtPX96 / (liquidity +- amount * sqrtPX96)_ , if this is impossible because of overflow, we calculate _liquidity / (liquidity / sqrtPX96 +- amount)_.
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtPX96`| uint160| The starting price, i.e. before accounting for the token0 delta  
`liquidity`| uint128| The amount of usable liquidity  
`amount`| uint256| How much of token0 to add or remove from virtual reserves  
`add`| bool| Whether to add or remove the amount of token0  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values "Direct link to Return Values:")
Type| Description  
---|---  
uint160| price after adding or removing amount, depending on add  
### getNextSqrtPriceFromAmount1RoundingDown[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefromamount1roundingdown "Direct link to getNextSqrtPriceFromAmount1RoundingDown")
```
functiongetNextSqrtPriceFromAmount1RoundingDown(uint160 sqrtPX96,uint128 liquidity,uint256 amount,bool add)internalpurereturns(uint160)
```

Gets the next sqrt price given a delta of token1
Always rounds down, because in the exact output case (decreasing price) we need to move the price at least far enough to get the desired output amount, and in the exact input case (increasing price) we need to move the price less in order to not send too much output. The formula we compute is within <1 wei of the lossless version: _sqrtPX96 +- amount / liquidity_
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-1 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtPX96`| uint160| The starting price, i.e., before accounting for the token1 delta  
`liquidity`| uint128| The amount of usable liquidity  
`amount`| uint256| How much of token1 to add, or remove, from virtual reserves  
`add`| bool| Whether to add, or remove, the amount of token1  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-1 "Direct link to Return Values:")
Type| Description  
---|---  
uint160| price after adding or removing `amount`  
### getNextSqrtPriceFromInput[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefrominput "Direct link to getNextSqrtPriceFromInput")
```
functiongetNextSqrtPriceFromInput(uint160 sqrtPX96,uint128 liquidity,uint256 amountIn,bool zeroForOne)internalpurereturns(uint160 sqrtQX96)
```

Gets the next sqrt price given an input amount of token0 or token1
Throws if price or liquidity are 0, or if the next price is out of bounds
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-2 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtPX96`| uint160| The starting price, i.e., before accounting for the input amount  
`liquidity`| uint128| The amount of usable liquidity  
`amountIn`| uint256| How much of token0, or token1, is being swapped in  
`zeroForOne`| bool| Whether the amount in is token0 or token1  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-2 "Direct link to Return Values:")
Name| Type| Description  
---|---|---  
`sqrtQX96`| uint160| The price after adding the input amount to token0 or token1  
### getNextSqrtPriceFromOutput[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefromoutput "Direct link to getNextSqrtPriceFromOutput")
```
functiongetNextSqrtPriceFromOutput(uint160 sqrtPX96,uint128 liquidity,uint256 amountOut,bool zeroForOne)internalpurereturns(uint160 sqrtQX96)
```

Gets the next sqrt price given an output amount of token0 or token1
Throws if price or liquidity are 0 or the next price is out of bounds
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-3 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtPX96`| uint160| The starting price before accounting for the output amount  
`liquidity`| uint128| The amount of usable liquidity  
`amountOut`| uint256| How much of token0, or token1, is being swapped out  
`zeroForOne`| bool| Whether the amount out is token0 or token1  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-3 "Direct link to Return Values:")
Name| Type| Description  
---|---|---  
`sqrtQX96`| uint160| The price after removing the output amount of token0 or token1  
### getAmount0Delta[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount0delta "Direct link to getAmount0Delta")
```
functiongetAmount0Delta(uint160 sqrtRatioAX96,uint160 sqrtRatioBX96,uint128 liquidity,bool roundUp)internalpurereturns(uint256 amount0)
```

Gets the amount0 delta between two prices
Calculates _liquidity / sqrt(lower) - liquidity / sqrt(upper)_ , i.e. _liquidity * (sqrt(upper) - sqrt(lower)) / (sqrt(upper) * sqrt(lower))_
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-4 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtRatioAX96`| uint160| A sqrt price  
`sqrtRatioBX96`| uint160| Another sqrt price  
`liquidity`| uint128| The amount of usable liquidity  
`roundUp`| bool| Whether to round the amount up or down  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-4 "Direct link to Return Values:")
Name| Type| Description  
---|---|---  
`amount0`| uint256| Amount of token0 required to cover a position of size liquidity between the two passed prices  
### getAmount1Delta[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount1delta "Direct link to getAmount1Delta")
```
functiongetAmount1Delta(uint160 sqrtRatioAX96,uint160 sqrtRatioBX96,uint128 liquidity,bool roundUp)internalpurereturns(uint256 amount1)
```

Gets the amount1 delta between two prices
Calculates _liquidity * (sqrt(upper) - sqrt(lower))_
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-5 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtRatioAX96`| uint160| A sqrt price  
`sqrtRatioBX96`| uint160| Another sqrt price  
`liquidity`| uint128| The amount of usable liquidity  
`roundUp`| bool| Whether to round the amount up, or down  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-5 "Direct link to Return Values:")
Name| Type| Description  
---|---|---  
`amount1`| uint256| Amount of token1 required to cover a position of size liquidity between the two passed prices  
### getAmount0Delta[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount0delta-1 "Direct link to getAmount0Delta")
```
functiongetAmount0Delta(uint160 sqrtRatioAX96,uint160 sqrtRatioBX96,int128 liquidity)internalpurereturns(int256 amount0)
```

Helper that gets signed token0 delta
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-6 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtRatioAX96`| uint160| A sqrt price  
`sqrtRatioBX96`| uint160| Another sqrt price  
`liquidity`| int128| The change in liquidity for which to compute the amount0 delta  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-6 "Direct link to Return Values:")
Name| Type| Description  
---|---|---  
`amount0`| int256| Amount of token0 corresponding to the passed liquidityDelta between the two prices  
### getAmount1Delta[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount1delta-1 "Direct link to getAmount1Delta")
```
functiongetAmount1Delta(uint160 sqrtRatioAX96,uint160 sqrtRatioBX96,int128 liquidity)internalpurereturns(int256 amount1)
```

Helper that gets signed token1 delta
#### Parameters:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#parameters-7 "Direct link to Parameters:")
Name| Type| Description  
---|---|---  
`sqrtRatioAX96`| uint160| A sqrt price  
`sqrtRatioBX96`| uint160| Another sqrt price  
`liquidity`| int128| The change in liquidity for which to compute the amount1 delta  
#### Return Values:[​](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#return-values-7 "Direct link to Return Values:")
Name| Type| Description  
---|---|---  
`amount1`| int256| Amount of token1 corresponding to the passed liquidityDelta between the two prices  
[Edit this page](https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/v3/reference/core/libraries/SqrtPriceMath.md)
Was this helpful?
[PreviousSecondsOutside](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SecondsOutside)[NextSwapMath](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SwapMath)
On this page
  * [Functions](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#functions)
    * [getNextSqrtPriceFromAmount0RoundingUp](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefromamount0roundingup)
    * [getNextSqrtPriceFromAmount1RoundingDown](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefromamount1roundingdown)
    * [getNextSqrtPriceFromInput](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefrominput)
    * [getNextSqrtPriceFromOutput](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getnextsqrtpricefromoutput)
    * [getAmount0Delta](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount0delta)
    * [getAmount1Delta](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount1delta)
    * [getAmount0Delta](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount0delta-1)
    * [getAmount1Delta](https://docs.uniswap.org/contracts/v3/reference/core/libraries/SqrtPriceMath#getamount1delta-1)


[Edit this page](https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/v3/reference/core/libraries/SqrtPriceMath.md)
## Footer
[Uniswap Labs](https://docs.uniswap.org/)
### Developers
  * [Dev Chat](https://discord.com/invite/uniswap)
  * [Concepts](https://docs.uniswap.org/concepts/overview)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
  * [SDKs](https://docs.uniswap.org/sdk/v4/overview)
  * [APIs](https://docs.uniswap.org/api/subgraph/overview)
  * [Whitepaper](https://app.uniswap.org/whitepaper-v4.pdf)


### Ecosystem
  * [Uniswap App](https://app.uniswap.org/)
  * [Governance](https://www.uniswapfoundation.org/governance)
  * [Blog](https://blog.uniswap.org/)


### Company
  * [Careers](https://boards.greenhouse.io/uniswaplabs)
  * [Brand Assets](https://github.com/Uniswap/brand-assets/raw/main/Uniswap%20Brand%20Assets.zip)
  * [Terms of Service](https://support.uniswap.org/hc/en-us/articles/30935100859661-Uniswap-Labs-Terms-of-Service)
  * [Privacy Policy](https://support.uniswap.org/hc/en-us/articles/30934457771405-Uniswap-Labs-Privacy-Policy)
  * [Trademark Policy](https://support.uniswap.org/hc/en-us/articles/30934762216973-Uniswap-Labs-Trademark-Guidelines)


### Need Help?
  * [Help Center](https://support.uniswap.org/)
  * [Contact Us](https://support.uniswap.org/hc/en-us/requests/new)


@2025 Uniswap Labs
[](https://github.com/uniswap/uniswap-docs)[](https://twitter.com/Uniswap)[](https://discord.com/invite/uniswap)
