# https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath

[Skip to main content](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#__docusaurus_skipToContent_fallback)
[Uniswap Docs](https://docs.uniswap.org/)
Search
[Submit Feedback](https://docs.google.com/forms/d/e/1FAIpQLSdjSkZam8KiatL9XACRVxCHjDJjaPGbls77PCXDKFn4JwykXg/viewform)
  * [Concepts](https://docs.uniswap.org/concepts/overview)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
    * [v4 Protocol](https://docs.uniswap.org/contracts/v4/overview)
      * [Overview](https://docs.uniswap.org/contracts/v4/overview)
      * [Deployments](https://docs.uniswap.org/contracts/v4/deployments)
      * [Concepts](https://docs.uniswap.org/contracts/v4/concepts/v4-vs-v3)
      * [Quickstart](https://docs.uniswap.org/contracts/v4/quickstart/create-pool)
        * [Create Pool](https://docs.uniswap.org/contracts/v4/quickstart/create-pool)
        * [Manage Liquidity](https://docs.uniswap.org/contracts/v4/quickstart/manage-liquidity/setup-liquidity)
        * [Swap](https://docs.uniswap.org/contracts/v4/quickstart/swap)
        * [Hooks](https://docs.uniswap.org/contracts/v4/quickstart/hooks/setup)
        * [Subscriber](https://docs.uniswap.org/contracts/v4/quickstart/subscriber)
      * [Guides](https://docs.uniswap.org/contracts/v4/guides/hooks/your-first-hook)
      * [Technical Reference](https://docs.uniswap.org/contracts/v4/reference/errors/)
        * [Errors](https://docs.uniswap.org/contracts/v4/reference/errors/)
        * [Core](https://docs.uniswap.org/contracts/v4/reference/core/libraries/BitMath)
          * [Libraries](https://docs.uniswap.org/contracts/v4/reference/core/libraries/BitMath)
            * [BitMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/BitMath)
            * [CurrencyDelta](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CurrencyDelta)
            * [CurrencyReserves](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CurrencyReserves)
            * [CustomRevert](https://docs.uniswap.org/contracts/v4/reference/core/libraries/CustomRevert)
            * [FixedPoint128](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FixedPoint128)
            * [FixedPoint96](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FixedPoint96)
            * [FullMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/FullMath)
            * [Hooks](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Hooks)
            * [LPFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LPFeeLibrary)
            * [LiquidityMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/LiquidityMath)
            * [Lock](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Lock)
            * [NonzeroDeltaCount](https://docs.uniswap.org/contracts/v4/reference/core/libraries/NonzeroDeltaCount)
            * [ParseBytes](https://docs.uniswap.org/contracts/v4/reference/core/libraries/ParseBytes)
            * [Pool](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Pool)
            * [Position](https://docs.uniswap.org/contracts/v4/reference/core/libraries/Position)
            * [ProtocolFeeLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/ProtocolFeeLibrary)
            * [SafeCast](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SafeCast)
            * [SqrtPriceMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SqrtPriceMath)
            * [StateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/StateLibrary)
            * [SwapMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath)
            * [TickBitmap](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickBitmap)
            * [TickMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickMath)
            * [TransientStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TransientStateLibrary)
            * [UnsafeMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/UnsafeMath)
            * [LiquidityAmounts](https://docs.uniswap.org/contracts/v4/reference/core/libraries/liquidity-amounts)
            * [TransientStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/transient-state-library)
          * [Types](https://docs.uniswap.org/contracts/v4/reference/core/types/BalanceDelta)
          * [ERC6909](https://docs.uniswap.org/contracts/v4/reference/core/ERC6909)
          * [ERC6909Claims](https://docs.uniswap.org/contracts/v4/reference/core/ERC6909Claims)
          * [Extsload](https://docs.uniswap.org/contracts/v4/reference/core/Extsload)
          * [Exttload](https://docs.uniswap.org/contracts/v4/reference/core/Exttload)
          * [IPoolManager](https://docs.uniswap.org/contracts/v4/reference/core/IPoolManager)
          * [NoDelegateCall](https://docs.uniswap.org/contracts/v4/reference/core/NoDelegateCall)
          * [PoolManager](https://docs.uniswap.org/contracts/v4/reference/core/PoolManager)
          * [ProtocolFees](https://docs.uniswap.org/contracts/v4/reference/core/ProtocolFees)
          * [interfaces](https://docs.uniswap.org/contracts/v4/reference/core/interfaces/IERC20Minimal)
          * [test](https://docs.uniswap.org/contracts/v4/reference/core/test/ActionsRouter)
        * [Periphery](https://docs.uniswap.org/contracts/v4/reference/periphery/PositionDescriptor)
    * [v3 Protocol](https://docs.uniswap.org/contracts/v3/overview)
    * [Smart Wallet](https://docs.uniswap.org/contracts/smart-wallet/overview)
    * [UniswapX](https://docs.uniswap.org/contracts/uniswapx/overview)
    * [Universal Router](https://docs.uniswap.org/contracts/universal-router/overview)
    * [Permit2](https://docs.uniswap.org/contracts/permit2/overview)
    * [v2 Protocol](https://docs.uniswap.org/contracts/v2/overview)
    * [v1 Protocol](https://docs.uniswap.org/contracts/v1/overview)
  * [SDKs](https://docs.uniswap.org/sdk/v4/overview)
  * [APIs](https://docs.uniswap.org/api/subgraph/overview)


  * [Home](https://docs.uniswap.org/)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
  * v4 Protocol
  * Technical Reference
  * Core
  * Libraries
  * [SwapMath](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath)


On this page
# SwapMath
[Git Source](https://github.com/uniswap/v4-core/blob/80311e34080fee64b6fc6c916e9a51a437d0e482/src/libraries/SwapMath.sol) - Generated with [forge doc](https://book.getfoundry.sh/reference/forge/forge-doc)
Contains methods for computing the result of a swap within a single tick price range, i.e., a single tick.
## State Variables[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#state-variables "Direct link to State Variables")
### MAX_SWAP_FEE[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#max_swap_fee "Direct link to MAX_SWAP_FEE")
the swap fee is represented in hundredths of a bip, so the max is 100%
_the swap fee is the total fee on a swap, including both LP and Protocol fee_
```
uint256internalconstant MAX_SWAP_FEE =1e6;
```

## Functions[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#functions "Direct link to Functions")
### getSqrtPriceTarget[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#getsqrtpricetarget "Direct link to getSqrtPriceTarget")
Computes the sqrt price target for the next swap step
```
functiongetSqrtPriceTarget(bool zeroForOne,uint160 sqrtPriceNextX96,uint160 sqrtPriceLimitX96)internalpurereturns(uint160 sqrtPriceTargetX96);
```

**Parameters**
Name| Type| Description  
---|---|---  
`zeroForOne`| `bool`| The direction of the swap, true for currency0 to currency1, false for currency1 to currency0  
`sqrtPriceNextX96`| `uint160`| The Q64.96 sqrt price for the next initialized tick  
`sqrtPriceLimitX96`| `uint160`| The Q64.96 sqrt price limit. If zero for one, the price cannot be less than this value after the swap. If one for zero, the price cannot be greater than this value after the swap  
**Returns**
Name| Type| Description  
---|---|---  
`sqrtPriceTargetX96`| `uint160`| The price target for the next swap step  
### computeSwapStep[​](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#computeswapstep "Direct link to computeSwapStep")
Computes the result of swapping some amount in, or amount out, given the parameters of the swap
_If the swap's amountSpecified is negative, the combined fee and input amount will never exceed the absolute value of the remaining amount._
_feePips must be no larger than MAX_SWAP_FEE for this function. We ensure that before setting a fee using LPFeeLibrary.isValid._
```
functioncomputeSwapStep(uint160 sqrtPriceCurrentX96,uint160 sqrtPriceTargetX96,uint128 liquidity,int256 amountRemaining,uint24 feePips)internalpurereturns(uint160 sqrtPriceNextX96,uint256 amountIn,uint256 amountOut,uint256 feeAmount);
```

**Parameters**
Name| Type| Description  
---|---|---  
`sqrtPriceCurrentX96`| `uint160`| The current sqrt price of the pool  
`sqrtPriceTargetX96`| `uint160`| The price that cannot be exceeded, from which the direction of the swap is inferred  
`liquidity`| `uint128`| The usable liquidity  
`amountRemaining`| `int256`| How much input or output amount is remaining to be swapped in/out  
`feePips`| `uint24`| The fee taken from the input amount, expressed in hundredths of a bip  
**Returns**
Name| Type| Description  
---|---|---  
`sqrtPriceNextX96`| `uint160`| The price after swapping the amount in/out, not to exceed the price target  
`amountIn`| `uint256`| The amount to be swapped in, of either currency0 or currency1, based on the direction of the swap  
`amountOut`| `uint256`| The amount to be received, of either currency0 or currency1, based on the direction of the swap  
`feeAmount`| `uint256`| The amount of input that will be taken as a fee  
[Edit this page](https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/v4/reference/core/libraries/SwapMath.md)
Was this helpful?
[PreviousStateLibrary](https://docs.uniswap.org/contracts/v4/reference/core/libraries/StateLibrary)[NextTickBitmap](https://docs.uniswap.org/contracts/v4/reference/core/libraries/TickBitmap)
On this page
  * [State Variables](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#state-variables)
    * [MAX_SWAP_FEE](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#max_swap_fee)
  * [Functions](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#functions)
    * [getSqrtPriceTarget](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#getsqrtpricetarget)
    * [computeSwapStep](https://docs.uniswap.org/contracts/v4/reference/core/libraries/SwapMath#computeswapstep)


[Edit this page](https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/v4/reference/core/libraries/SwapMath.md)
## Footer
[Uniswap Labs](https://docs.uniswap.org/)
### Developers
  * [Dev Chat](https://discord.com/invite/uniswap)
  * [Concepts](https://docs.uniswap.org/concepts/overview)
  * [Contracts](https://docs.uniswap.org/contracts/v4/overview)
  * [SDKs](https://docs.uniswap.org/sdk/v4/overview)
  * [APIs](https://docs.uniswap.org/api/subgraph/overview)
  * [Whitepaper](https://app.uniswap.org/whitepaper-v4.pdf)


### Ecosystem
  * [Uniswap App](https://app.uniswap.org/)
  * [Governance](https://www.uniswapfoundation.org/governance)
  * [Blog](https://blog.uniswap.org/)


### Company
  * [Careers](https://boards.greenhouse.io/uniswaplabs)
  * [Brand Assets](https://github.com/Uniswap/brand-assets/raw/main/Uniswap%20Brand%20Assets.zip)
  * [Terms of Service](https://support.uniswap.org/hc/en-us/articles/30935100859661-Uniswap-Labs-Terms-of-Service)
  * [Privacy Policy](https://support.uniswap.org/hc/en-us/articles/30934457771405-Uniswap-Labs-Privacy-Policy)
  * [Trademark Policy](https://support.uniswap.org/hc/en-us/articles/30934762216973-Uniswap-Labs-Trademark-Guidelines)


### Need Help?
  * [Help Center](https://support.uniswap.org/)
  * [Contact Us](https://support.uniswap.org/hc/en-us/requests/new)


@2025 Uniswap Labs
[](https://github.com/uniswap/uniswap-docs)[](https://twitter.com/Uniswap)[](https://discord.com/invite/uniswap)
